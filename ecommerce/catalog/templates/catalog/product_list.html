{% extends 'base.html' %}
{% load static %}
{% block title %}Products{% endblock %}
{% block content %}
<h1>Products{% if category %} in {{ category.name }}{% endif %}</h1>
<aside>
	<ul>
		<li><a href="/">All</a></li>
		{% for c in categories %}
			<li><a href="{{ c.get_absolute_url }}">{{ c.name }}</a></li>
		{% endfor %}
	</ul>
</aside>
<section>
	<ul>
		{% for product in products %}
			<li>
				<a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
				{% if product.image %}
					<img src="{{ product.image.url }}" alt="{{ product.name }}" width="120" />
				{% endif %}
				<p>${{ product.price }}</p>
				<form action="{% url 'cart:cart_add' product.id %}" method="post">
					{% csrf_token %}
					{{ cart_add_form.quantity }}
					{{ cart_add_form.override }}
					<button type="submit">Add to cart</button>
				</form>
			</li>
		{% empty %}
			<li>No products found.</li>
		{% endfor %}
	</ul>
</section>
{% endblock %}